const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DL-TAWz4.js","./BKfStdPn.js","./D7eXvItr.js","./CS12zfK5.js","./TenLCVZ2.js","./entry.8wRNIVJo.css","./CVUkmZDd.js","./C13ThLRp.js"])))=>i.map(i=>d[i]);
import{d as e,k as a,l as t,e as r}from"#entry";import{c as n}from"./C13ThLRp.js";import{z as s,a as i,ad as o,a9 as u,i as c,v as l,y as d,b as p,d as f,k as y,t as h,C as _,G as m,g}from"./TenLCVZ2.js";import{m as v,n as D,g as w,o as P,l as b,_ as x}from"./BKfStdPn.js";import{u as C}from"./CVUkmZDd.js";const j={trailing:!0};function E(e,a=25,t={}){if(t={...j,...t},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let r,n,s,i,o=[];const u=(a,r)=>(s=async function(e,a,t){return await e.apply(a,t)}(e,a,r),s.finally(()=>{if(s=null,t.trailing&&i&&!n){const e=u(a,i);return i=null,e}}),s),c=function(...e){return t.trailing&&(i=e),s||new Promise(s=>{const c=!n&&t.leading;clearTimeout(n),n=setTimeout(()=>{n=null;const a=t.leading?r:u(this,e);i=null;for(const e of o)e(a);o=[]},a),c?(r=u(this,e),s(r)):o.push(s)})},l=e=>{e&&(clearTimeout(e),n=null)};return c.isPending=()=>!!n,c.cancel=()=>{l(n),o=[],i=null},c.flush=()=>{if(l(n),!i||s)return;const e=i;return i=null,u(this,e)},c}function O(...t){const r="string"==typeof t[t.length-1]?t.pop():void 0;(function(e,a){if("string"==typeof e)return!1;if("object"==typeof e&&null!==e)return!1;if("function"==typeof e&&"function"==typeof a)return!1;return!0})(t[0],t[1])&&t.unshift(r);let[f,y,h={}]=t;const _=s(()=>p(f));if("string"!=typeof _.value)throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if("function"!=typeof y)throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const m=e();h.server??=!0,h.default??=A,h.getCachedData??=S,h.lazy??=!1,h.immediate??=!0,h.deep??=a.deep,h.dedupe??="cancel",h._functionName,m._asyncData[_.value];const v={cause:"initial",dedupe:h.dedupe};m._asyncData[_.value]?._init||(v.cachedData=h.getCachedData(_.value,m,{cause:"initial"}),m._asyncData[_.value]=T(m,_.value,y,h,v.cachedData));const D=m._asyncData[_.value];D._deps++;const w=()=>m._asyncData[_.value].execute(v),P=!1!==h.server&&m.payload.serverRendered;{let e=function(e){const a=m._asyncData[e];a?._deps&&(a._deps--,0===a._deps&&a?._off())};const t=i();if(t&&P&&h.immediate&&!t.sp&&(t.sp=[]),t&&!t._nuxtOnBeforeMountCbs){t._nuxtOnBeforeMountCbs=[];const e=t._nuxtOnBeforeMountCbs;o(()=>{e.forEach(e=>{e()}),e.splice(0,e.length)}),u(()=>e.splice(0,e.length))}const r=t&&(t._nuxtClientOnly||c(n,!1));P&&m.isHydrating&&(D.error.value||null!=D.data.value)?(D.pending.value=!1,D.status.value=D.error.value?"error":"success"):t&&(!r&&m.payload.serverRendered&&m.isHydrating||h.lazy)&&h.immediate?t._nuxtOnBeforeMountCbs.push(w):h.immediate&&w();const s=g(),p=l(_,(t,r)=>{if((t||r)&&t!==r){const n=m._asyncData[r]?.data.value!==a.value,s=void 0!==m._asyncDataPromises[r];r&&e(r);const i={cause:"initial",dedupe:h.dedupe};if(!m._asyncData[t]?._init){let e;r&&n?e=m._asyncData[r]?.data.value:(e=h.getCachedData(t,m,{cause:"initial"}),i.cachedData=e),m._asyncData[t]=T(m,t,y,h,e)}m._asyncData[t]._deps++,(h.immediate||n||s)&&m._asyncData[t].execute(i)}},{flush:"sync"}),f=h.watch?l(h.watch,()=>{D._execute({cause:"watch",dedupe:h.dedupe})}):()=>{};s&&d(()=>{p(),f(),e(_.value)})}const b={data:$(()=>m._asyncData[_.value]?.data),pending:$(()=>m._asyncData[_.value]?.pending),status:$(()=>m._asyncData[_.value]?.status),error:$(()=>m._asyncData[_.value]?.error),refresh:(...e)=>m._asyncData[_.value].execute(...e),execute:(...e)=>m._asyncData[_.value].execute(...e),clear:()=>k(m,_.value)},x=Promise.resolve(m._asyncDataPromises[_.value]).then(()=>b);return Object.assign(x,b),x}function $(e){return s({get:()=>e()?.value,set(a){const t=e();t&&(t.value=a)}})}function k(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=a.errorValue),e._asyncData[t]&&(e._asyncData[t].data.value=void 0,e._asyncData[t].error.value=a.errorValue,e._asyncData[t].pending.value=!1,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function T(e,r,n,s,i){e.payload._errors[r]??=a.errorValue;const o=s.getCachedData!==S,u=n,c=s.deep?f:y,l=null!=i,d=e.hook("app:data:refresh",async e=>{e&&!e.includes(r)||await p.execute({cause:"refresh:hook"})}),p={data:c(l?i:s.default()),pending:y(!l),error:h(e.payload._errors,r),status:y("idle"),execute:(...n)=>{const[i,o]=n,c=i&&void 0===o&&"object"==typeof i?i:{};if(e._asyncDataPromises[r]){if("defer"===(l=c.dedupe??s.dedupe)||!1===l)return e._asyncDataPromises[r];e._asyncDataPromises[r].cancelled=!0}var l;if("initial"===c.cause||e.isHydrating){const t="cachedData"in c?c.cachedData:s.getCachedData(r,e,{cause:c.cause??"refresh:manual"});if(null!=t)return e.payload.data[r]=p.data.value=t,p.error.value=a.errorValue,p.status.value="success",Promise.resolve(t)}p.pending.value=!0,p.status.value="pending";const d=new Promise((a,t)=>{try{a(u(e))}catch(r){t(r)}}).then(async t=>{if(d.cancelled)return e._asyncDataPromises[r];let n=t;s.transform&&(n=await s.transform(t)),s.pick&&(n=function(e,a){const t={};for(const r of a)t[r]=e[r];return t}(n,s.pick)),e.payload.data[r]=n,p.data.value=n,p.error.value=a.errorValue,p.status.value="success"}).catch(a=>{if(d.cancelled)return e._asyncDataPromises[r];p.error.value=t(a),p.data.value=m(s.default()),p.status.value="error"}).finally(()=>{d.cancelled||(p.pending.value=!1,delete e._asyncDataPromises[r])});return e._asyncDataPromises[r]=d,e._asyncDataPromises[r]},_execute:E((...e)=>p.execute(...e),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{d(),e._asyncData[r]?._init&&(e._asyncData[r]._init=!1),o||_(()=>{e._asyncData[r]?._init||(k(e,r),p.execute=()=>Promise.resolve(),p.data.value=a.value)})}};return p}const A=()=>a.value,S=(e,a,t)=>a.isHydrating?a.payload.data[e]:"refresh:manual"!==t.cause&&"refresh:hook"!==t.cause?a.static.data[e]:void 0,B=(e,a)=>a.split(".").reduce((e,a)=>e&&e[a],e),R=(e,a)=>Object.keys(e).filter(a).reduce((a,t)=>Object.assign(a,{[t]:e[t]}),{}),V=e=>a=>e&&e.length?R(a,a=>!e.includes(a)):a,I=e=>a=>Array.isArray(a)?a.map(a=>e(a)):e(a),q=e=>{const a=[],t=[];for(const r of e)["$","_"].includes(r)?a.push(r):t.push(r);return{prefixes:a,properties:t}},H=(e=[])=>a=>{if(0===e.length||!a)return a;const{prefixes:t,properties:r}=q(e);return R(a,e=>!r.includes(e)&&!t.includes(e[0]))},M=(e=[])=>a=>{if(0===e.length||!a)return a;const{prefixes:t,properties:r}=q(e);return R(a,e=>r.includes(e)||t.includes(e[0]))},N=(e,a)=>{const t=new Intl.Collator(a.$locale,{numeric:a.$numeric,caseFirst:a.$caseFirst,sensitivity:a.$sensitivity}),r=Object.keys(a).filter(e=>!e.startsWith("$"));for(const n of r)e=e.sort((e,r)=>{const s=[B(e,n),B(r,n)].map(e=>{if(null!==e)return e instanceof Date?e.toISOString():e});return-1===a[n]&&s.reverse(),t.compare(s[0],s[1])});return e},z=(e,a="Expected an array")=>{if(!Array.isArray(e))throw new TypeError(a)},F=e=>Array.isArray(e)?e:[void 0,null].includes(e)?[]:[e],G=["sort","where","only","without"];function L(e,a={}){const t={};for(const i of Object.keys(a.initialParams||{}))t[i]=G.includes(i)?F(a.initialParams[i]):a.initialParams[i];const r=(e,a=e=>e)=>(...r)=>(t[e]=a(...r),s),n=e=>a.legacy?e?.surround?e.surround:e?(e?.dirConfig&&(e.result={_path:e.dirConfig?._path,...e.result,_dir:e.dirConfig}),e?._path||Array.isArray(e)||!Object.prototype.hasOwnProperty.call(e,"result")?e:e?.result):e:e,s={params:()=>({...t,...t.where?{where:[...F(t.where)]}:{},...t.sort?{sort:[...F(t.sort)]}:{}}),only:r("only",F),without:r("without",F),where:r("where",e=>[...F(t.where),...F(e)]),sort:r("sort",e=>[...F(t.sort),...F(e)]),limit:r("limit",e=>parseInt(String(e),10)),skip:r("skip",e=>parseInt(String(e),10)),find:()=>e(s).then(n),findOne:()=>e(r("first")(!0)).then(n),count:()=>e(r("count")(!0)).then(n),locale:e=>s.where({_locale:e}),withSurround:r("surround",(e,a)=>({query:e,...a})),withDirConfig:()=>r("dirConfig")(!0)};return a.legacy?(s.findSurround=(e,a)=>s.withSurround(e,a).find().then(n),s):s}function Q(e){return JSON.stringify(e,W)}function W(e,a){return a instanceof RegExp?`--REGEX ${a.toString()}`:a}const J=e=>{let a=Q(e);a="undefined"!=typeof Buffer?Buffer.from(a).toString("base64"):btoa(a),a=a.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return(a.match(/.{1,100}/g)||[]).join("/")},U=e=>v(e,r().public.content.api.baseURL),X=()=>{throw new Error("useContent is only accessible when you are using `documentDriven` mode.")},Y=()=>{const{experimental:e}=r().public.content;return!!e.clientDB||C().isEnabled()};function Z(e,...a){const{content:t}=r().public,n=L(async e=>{const{content:a}=r().public,t=e.params(),n=a.experimental.stripQueryParameters?U(`/query/${b(t)}.${a.integrity}/${J(t)}.json`):U(`/query/${b(t)}.${a.integrity}.json`);if(Y())return(await x(()=>import("./DL-TAWz4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(e=>e.useContentDatabase())).fetch(e);const s=await $fetch(n,{method:"GET",responseType:"json",params:a.experimental.stripQueryParameters?void 0:{_params:Q(t),previewToken:C().getPreviewToken()}});if("string"==typeof s&&s.startsWith("<!DOCTYPE html>"))throw new Error("Not found");return s},{initialParams:"string"!=typeof e?e:{},legacy:!0});let s;"string"==typeof e&&(s=D(w(e,...a)));const i=n.params;return n.params=()=>{const e=i();if(s&&(e.where=e.where||[],e.first&&0===(e.where||[]).length?e.where.push({_path:P(s)}):e.where.push({_path:new RegExp(`^${s.replace(/[-[\]{}()*+.,^$\s/]/g,"\\$&")}`)})),e.sort?.length||(e.sort=[{_stem:1,$numeric:!0}]),t.locales.length){const a=e.where?.find(e=>e._locale)?._locale;a||(e.where=e.where||[],e.where.push({_locale:t.defaultLocale}))}return e},n}export{X as a,F as b,z as c,I as d,J as e,N as f,B as g,H as h,M as i,Q as j,L as k,V as o,Z as q,Y as s,O as u,U as w};
