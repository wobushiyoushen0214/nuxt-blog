import{b as e}from"./BKfStdPn.js";import{c as t}from"#entry";import{d as r,y as n,v as i,g as o,ah as a,C as s}from"./TenLCVZ2.js";function c(e){return"string"==typeof e?`'${e}'`:(new l).serialize(e)}const l=function(){class e{#e=new Map;compare(e,t){const r=typeof e,n=typeof t;return"string"===r&&"string"===n?e.localeCompare(t):"number"===r&&"number"===n?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(null===e)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if("[object Object]"!==t)return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const r=e.constructor,n=r===Object||void 0===r?"":r.name;if(""!==n&&globalThis[n]===r)return this.serializeBuiltInType(n,e);if("function"==typeof e.toJSON){const t=e.toJSON();return n+(null!==t&&"object"==typeof t?this.$object(t):`(${this.serialize(t)})`)}return this.serializeObjectEntries(n,Object.entries(e))}serializeBuiltInType(e,t){const r=this["$"+e];if(r)return r.call(this,t);if("function"==typeof t?.entries)return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const r=Array.from(t).sort((e,t)=>this.compare(e[0],t[0]));let n=`${e}{`;for(let i=0;i<r.length;i++){const[e,t]=r[i];n+=`${this.serialize(e,!0)}:${this.serialize(t)}`,i<r.length-1&&(n+=",")}return n+"}"}$object(e){let t=this.#e.get(e);return void 0===t&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return"[native code] }"===t.slice(-15)?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let r=0;r<e.length;r++)t+=this.serialize(e[r]),r<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((e,t)=>this.compare(e,t)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const t of["Error","RegExp","URL"])e.prototype["$"+t]=function(e){return`${t}(${e})`};for(const t of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])e.prototype["$"+t]=function(e){return`${t}[${e.join(",")}]`};for(const t of["BigInt64Array","BigUint64Array"])e.prototype["$"+t]=function(e){return`${t}[${e.join("n,")}${e.length>0?"n":""}]`};return e}();function u(e){return e.includes("%")?decodeURIComponent(e):e}function f(e,t){try{return t(e)}catch{return e}}const p=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function h(e,t,r){const n=r||{},i=n.encode||encodeURIComponent;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!p.test(e))throw new TypeError("argument name is invalid");const o=i(t);if(o&&!p.test(o))throw new TypeError("argument val is invalid");let a=e+"="+o;if(void 0!==n.maxAge&&null!==n.maxAge){const e=n.maxAge-0;if(Number.isNaN(e)||!Number.isFinite(e))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(e)}if(n.domain){if(!p.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!p.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(s=n.expires,!("[object Date]"===Object.prototype.toString.call(s)||s instanceof Date)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}var s;if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.priority){switch("string"==typeof n.priority?n.priority.toLowerCase():n.priority){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return n.partitioned&&(a+="; Partitioned"),a}function y(e){if("object"!=typeof e)return e;var t,r,n=Object.prototype.toString.call(e);if("[object Object]"===n){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in r=new e.constructor,e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=y(e[t]));else for(t in r={},e)"__proto__"===t?Object.defineProperty(r,t,{value:y(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=y(e[t]);return r}if("[object Array]"===n){for(t=e.length,r=Array(t);t--;)r[t]=y(e[t]);return r}return"[object Set]"===n?(r=new Set,e.forEach(function(e){r.add(y(e))}),r):"[object Map]"===n?(r=new Map,e.forEach(function(e,t){r.set(y(t),y(e))}),r):"[object Date]"===n?new Date(+e):"[object RegExp]"===n?((r=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,r):"[object DataView]"===n?new e.constructor(y(e.buffer)):"[object ArrayBuffer]"===n?e.slice(0):"Array]"===n.slice(-6)?new e.constructor(e):e}const d={path:"/",watch:!0,decode:t=>e(decodeURIComponent(t)),encode:e=>encodeURIComponent("string"==typeof e?e:JSON.stringify(e))},m=globalThis.cookieStore;function g(e,t){const l={...d,...t};l.filter??=t=>t===e;const u=w(l)||{};let f;void 0!==l.maxAge?f=1e3*l.maxAge:l.expires&&(f=l.expires.getTime()-Date.now());const p=void 0!==f&&f<=0,g=p||void 0===u[e]||null===u[e],b=y(p?void 0:u[e]??l.default?.()),$=f&&!p?function(e,t,s){let c,l,u=0;const f=s?r(e):{value:e};o()&&n(()=>{l?.(),clearTimeout(c)});return a((e,r)=>{function n(){u=0,clearTimeout(c);const e=t-u,i=e<v?e:v;c=setTimeout(()=>{if(u+=i,u<t)return n();f.value=void 0,r()},i)}return s&&(l=i(f,r)),{get:()=>(e(),f.value),set(e){n(),f.value=e,r()}}})}(b,f,l.watch&&"shallow"!==l.watch):r(b);{let t=null;try{m||"undefined"==typeof BroadcastChannel||(t=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const r=(r=!1)=>{var n,i;(r||!l.readonly&&(n=$.value,i=u[e],n!==i&&c(n)!==c(i)))&&(!function(e,t,r={}){document.cookie=function(e,t,r={}){if(null==t)return h(e,t,{...r,maxAge:-1});return h(e,t,r)}(e,t,r)}(e,$.value,l),u[e]=y($.value),t?.postMessage({value:l.encode($.value)}))},a=t=>{const r=t.refresh?w(l)?.[e]:l.decode(t.value);f=!0,$.value=r,u[e]=y(r),s(()=>{f=!1})};let f=!1;const p=!!o();if(p&&n(()=>{f=!0,r(),t?.close()}),m){const t=t=>{const r=t.changed.find(t=>t.name===e),n=t.deleted.find(t=>t.name===e);r&&a({value:r.value}),n&&a({value:null})};m.addEventListener("change",t),p&&n(()=>m.removeEventListener("change",t))}else t&&(t.onmessage=({data:e})=>a(e));l.watch&&i($,()=>{f||r()},{deep:"shallow"!==l.watch}),g&&r(g)}return $}function w(e={}){return function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");const r={},n=t||{},i=n.decode||u;let o=0;for(;o<e.length;){const t=e.indexOf("=",o);if(-1===t)break;let a=e.indexOf(";",o);if(-1===a)a=e.length;else if(a<t){o=e.lastIndexOf(";",t-1)+1;continue}const s=e.slice(o,t).trim();if(!n?.filter||n?.filter(s)){if(void 0===r[s]){let n=e.slice(t+1,a).trim();34===n.codePointAt(0)&&(n=n.slice(1,-1)),r[s]=f(n,i)}o=a+1}else o=a+1}return r}(document.cookie,e)}const v=2147483647;const b=()=>({isEnabled:()=>{const e=t().query;return!(Object.prototype.hasOwnProperty.call(e,"preview")&&!e.preview)&&(!(!e.preview&&!g("previewToken").value)||!!sessionStorage.getItem("previewToken"))},getPreviewToken:()=>g("previewToken").value||sessionStorage.getItem("previewToken")||void 0,setPreviewToken:e=>{g("previewToken").value=e,t().query.preview=e||"",e?sessionStorage.setItem("previewToken",e):sessionStorage.removeItem("previewToken"),window.location.reload()}});export{b as u};
